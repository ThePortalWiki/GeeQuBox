/**
 * jQuery lightBox plugin
 * This jQuery plugin was inspired and based on Lightbox 2 by Lokesh Dhakar (http://www.huddletogether.com/projects/lightbox2/)
 * and adapted to me for use like a plugin from jQuery.
 * @name jquery-lightbox-0.5.js
 * @author Leandro Vieira Pinho - http://leandrovieira.com
 * @version 0.5
 * @date April 11, 2008
 * @category jQuery plugin
 * @copyright (c) 2008 Leandro Vieira Pinho (leandrovieira.com)
 * @license CCAttribution-ShareAlike 2.5 Brazil - http://creativecommons.org/licenses/by-sa/2.5/br/deed.en_US
 * @example Visit http://leandrovieira.com/projects/jquery/lightbox/ for more informations about this jQuery plugin
 */
(function(e){e.fn.lightBox=function(t){function r(n,r){e("embed, object, select").css({visibility:"hidden"});i();t.imageArray.length=0;t.activeImage=0;if(r.length==1){t.imageArray.push(new Array(n.getAttribute("data-url"),n.getAttribute("data-title")))}else{for(var o=0;o<r.length;o++){t.imageArray.push(new Array(r[o].getAttribute("data-url"),r[o].getAttribute("data-title")))}}while(t.imageArray[t.activeImage][0]!=n.getAttribute("data-url")){t.activeImage++}s()}function i(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var n=m();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:n[0],height:n[1]}).fadeIn();var r=g();e("#jquery-lightbox").css({top:r[1]+n[3]/10,left:r[0]}).show();e("#jquery-overlay,#jquery-lightbox").click(function(){v()});e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){v();return false});e(window).resize(function(){var t=m();e("#jquery-overlay").css({width:t[0],height:t[1]});var n=g();e("#jquery-lightbox").css({top:n[1]+t[3]/10,left:n[0]})})}function s(){e("#lightbox-loading").show();if(t.fixedNavigation){e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var n=new Image;n.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]);o(n.width,n.height);n.onload=function(){}};n.src=t.imageArray[t.activeImage][0]}function o(n,r){var i=e("#lightbox-container-image-box").width();var s=e("#lightbox-container-image-box").height();var o=n+t.containerBorderSize*2;var f=r+t.containerBorderSize*2;var l=i-o;var c=s-f;e("#lightbox-container-image-box").animate({width:o,height:f},t.containerResizeSpeed,function(){u()});if(l==0&&c==0){if(e.browser.msie){y(250)}else{y(100)}}e("#lightbox-container-image-data-box").css({width:n});e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:r+t.containerBorderSize*2})}function u(){e("#lightbox-loading").hide();e("#lightbox-image").fadeIn(function(){f();l()});d()}function f(){e("#lightbox-container-image-data-box").slideDown("fast");e("#lightbox-image-details-caption").hide();if(t.imageArray[t.activeImage][1]){e("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show()}if(t.imageArray.length>1){e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}}function l(){e("#lightbox-nav").show();e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"});if(t.activeImage!=0){if(t.fixedNavigation){e("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage-1;s();return false})}else{e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage-1;s();return false})}}if(t.activeImage!=t.imageArray.length-1){if(t.fixedNavigation){e("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage+1;s();return false})}else{e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage+1;s();return false})}}c()}function c(){e(document).keydown(function(e){p(e)})}function h(){e(document).unbind()}function p(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if(key==t.keyToClose||key=="x"||keycode==escapeKey){v()}if(key==t.keyToPrev||keycode==37){if(t.activeImage!=0){t.activeImage=t.activeImage-1;s();h()}}if(key==t.keyToNext||keycode==39){if(t.activeImage!=t.imageArray.length-1){t.activeImage=t.activeImage+1;s();h()}}}function d(){if(t.imageArray.length-1>t.activeImage){objNext=new Image;objNext.src=t.imageArray[t.activeImage+1][0]}if(t.activeImage>0){objPrev=new Image;objPrev.src=t.imageArray[t.activeImage-1][0]}}function v(){e("#jquery-lightbox").remove();e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()});e("embed, object, select").css({visibility:"visible"})}function m(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}}var n,r;if(self.innerHeight){if(document.documentElement.clientWidth){n=document.documentElement.clientWidth}else{n=self.innerWidth}r=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else{if(document.body){n=document.body.clientWidth;r=document.body.clientHeight}}}if(t<r){pageHeight=r}else{pageHeight=t}if(e<n){pageWidth=e}else{pageWidth=n}arrayPageSize=new Array(pageWidth,pageHeight,n,r);return arrayPageSize}function g(){var e,t;if(self.pageYOffset){t=self.pageYOffset;e=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else{if(document.body){t=document.body.scrollTop;e=document.body.scrollLeft}}}arrayPageScroll=new Array(e,t);return arrayPageScroll}function y(e){var t=new Date;n=null;do{var n=new Date}while(n-t<e)}t=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:false,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var n=this;return this.unbind("click").click(function(e){if(e.button==0){r(this,n);return false}})}})(jQuery)